<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:modeler="http://camunda.org/schema/modeler/1.0" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Web Modeler" exporterVersion="e9cadfa" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.6.0">
  <bpmn:process id="SearchAgent" name="Search Agent" isExecutable="true">
    <bpmn:subProcess id="ApiCalls" name="API Calls">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:input source="=retry_bool" target="retry_bool" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0s0riy6</bpmn:incoming>
      <bpmn:outgoing>Flow_12g0ycy</bpmn:outgoing>
      <bpmn:multiInstanceLoopCharacteristics>
        <bpmn:extensionElements>
          <zeebe:loopCharacteristics inputCollection="=API_to_probe_options" inputElement="api_schema" outputCollection="api_output_collection" outputElement="=api_output" />
        </bpmn:extensionElements>
      </bpmn:multiInstanceLoopCharacteristics>
      <bpmn:serviceTask id="CallApi" name="Call API" zeebe:modelerTemplate="io.camunda.connectors.HttpJson.v2" zeebe:modelerTemplateVersion="8" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3LjAzMzUgOC45OTk5N0MxNy4wMzM1IDEzLjQ0NzUgMTMuNDI4MSAxNy4wNTI5IDguOTgwNjUgMTcuMDUyOUM0LjUzMzE2IDE3LjA1MjkgMC45Mjc3NjUgMTMuNDQ3NSAwLjkyNzc2NSA4Ljk5OTk3QzAuOTI3NzY1IDQuNTUyNDggNC41MzMxNiAwLjk0NzA4MyA4Ljk4MDY1IDAuOTQ3MDgzQzEzLjQyODEgMC45NDcwODMgMTcuMDMzNSA0LjU1MjQ4IDE3LjAzMzUgOC45OTk5N1oiIGZpbGw9IiM1MDU1NjIiLz4KPHBhdGggZD0iTTQuOTMxMjYgMTQuMTU3MUw2Ljc4MTA2IDMuNzE0NzFIMTAuMTM3NUMxMS4xOTE3IDMuNzE0NzEgMTEuOTgyNCAzLjk4MzIzIDEyLjUwOTUgNC41MjAyN0MxMy4wNDY1IDUuMDQ3MzYgMTMuMzE1IDUuNzMzNTggMTMuMzE1IDYuNTc4OTJDMTMuMzE1IDcuNDQ0MTQgMTMuMDcxNCA4LjE1NTIyIDEyLjU4NDEgOC43MTIxNUMxMi4xMDY3IDkuMjU5MTMgMTEuNDU1MyA5LjYzNzA1IDEwLjYyOTggOS44NDU5TDEyLjA2MTkgMTQuMTU3MUgxMC4zMzE1TDkuMDMzNjQgMTAuMDI0OUg3LjI0MzUxTDYuNTEyNTQgMTQuMTU3MUg0LjkzMTI2Wk03LjQ5NzExIDguNTkyODFIOS4yNDI0OEM5Ljk5ODMyIDguNTkyODEgMTAuNTkwMSA4LjQyMzc0IDExLjAxNzcgOC4wODU2MUMxMS40NTUzIDcuNzM3NTMgMTEuNjc0MSA3LjI2NTEzIDExLjY3NDEgNi42Njg0MkMxMS42NzQxIDYuMTkxMDYgMTEuNTI0OSA1LjgxODExIDExLjIyNjUgNS41NDk1OUMxMC45MjgyIDUuMjcxMTMgMTAuNDU1OCA1LjEzMTkgOS44MDkzNiA1LjEzMTlIOC4xMDg3NEw3LjQ5NzExIDguNTkyODFaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K">
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
          <zeebe:ioMapping>
            <zeebe:input source="noAuth" target="authentication.type" />
            <zeebe:input source="POST" target="method" />
            <zeebe:input source="=&#34;https://mirageapi-80762090145.europe-west4.run.app&#34; + string(api_schema.endpoint)" target="url" />
            <zeebe:input source="={&#10;  Content-Type: &#34;application/json&#34;&#10;}" target="headers" />
            <zeebe:input source="120" target="connectionTimeoutInSeconds" />
            <zeebe:input source="120" target="readTimeoutInSeconds" />
            <zeebe:input source="=api_schema.payload.list" target="body" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultExpression" value="={&#10;  &#34;api_output&#34;:response.body&#10;}" />
            <zeebe:header key="retryBackoff" value="PT0S" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1geyetg</bpmn:incoming>
        <bpmn:outgoing>Flow_1j6bi06</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:endEvent id="EndCallApi">
        <bpmn:incoming>Flow_1j6bi06</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:startEvent id="StartCallApi">
        <bpmn:outgoing>Flow_1geyetg</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="Flow_1geyetg" sourceRef="StartCallApi" targetRef="CallApi" />
      <bpmn:sequenceFlow id="Flow_1j6bi06" sourceRef="CallApi" targetRef="EndCallApi" />
    </bpmn:subProcess>
    <bpmn:serviceTask id="ApiAggregatorAgent" name="API Aggregator Agent" zeebe:modelerTemplate="io.camunda.connectors.aws.bedrock.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgODAgODAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+SWNvbi1BcmNoaXRlY3R1cmUvNjQvQXJjaF9BbWF6b24tQmVkcm9ja182NDwvdGl0bGU+CiAgICA8ZyBpZD0iSWNvbi1BcmNoaXRlY3R1cmUvNjQvQXJjaF9BbWF6b24tQmVkcm9ja182NCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikljb24tQXJjaGl0ZWN0dXJlLUJHLzY0L01hY2hpbmUtTGVhcm5pbmciIGZpbGw9IiM5OTY5ZjciPgogICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiB4PSIwIiB5PSIwIiB3aWR0aD0iODAiIGhlaWdodD0iODAiPjwvcmVjdD4KICAgICAgICA8L2c+CiAgICAgICAgPGcgaWQ9Ikljb24tU2VydmljZS82NC9BbWF6b24tQmVkcm9ja182NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIuMDAwMDAwLCAxMi4wMDAwMDApIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHBhdGggZD0iTTUyLDI2Ljk5OTg5MTggQzUwLjg5NywyNi45OTk4OTE4IDUwLDI2LjEwMjg5MTggNTAsMjQuOTk5ODkxOCBDNTAsMjMuODk2ODkxOCA1MC44OTcsMjIuOTk5ODkxOCA1MiwyMi45OTk4OTE4IEM1My4xMDMsMjIuOTk5ODkxOCA1NCwyMy44OTY4OTE4IDU0LDI0Ljk5OTg5MTggQzU0LDI2LjEwMjg5MTggNTMuMTAzLDI2Ljk5OTg5MTggNTIsMjYuOTk5ODkxOCBMNTIsMjYuOTk5ODkxOCBaIE0yMC4xMTMsNTMuOTA3ODkxOCBMMTYuODY1LDUyLjAxMzg5MTggTDIzLjUzLDQ3Ljg0Nzg5MTggTDIyLjQ3LDQ2LjE1MTg5MTggTDE0LjkxMyw1MC44NzQ4OTE4IEw5LDQ3LjQyNTg5MTggTDksMzguNTM0ODkxOCBMMTQuNTU1LDM0LjgzMTg5MTggTDEzLjQ0NSwzMy4xNjc4OTE4IEw3Ljk1OSwzNi44MjQ4OTE4IEwyLDMzLjQxOTg5MTggTDIsMjguNTc5ODkxOCBMOC40OTYsMjQuODY3ODkxOCBMNy41MDQsMjMuMTMxODkxOCBMMiwyNi4yNzY4OTE4IEwyLDIyLjU3OTg5MTggTDgsMTkuMTUxODkxOCBMMTQsMjIuNTc5ODkxOCBMMTQsMjYuNDMzODkxOCBMOS40ODUsMjkuMTQyODkxOCBMMTAuNTE1LDMwLjg1Njg5MTggTDE1LDI4LjE2NTg5MTggTDE5LjQ4NSwzMC44NTY4OTE4IEwyMC41MTUsMjkuMTQyODkxOCBMMTYsMjYuNDMzODkxOCBMMTYsMjIuNTM0ODkxOCBMMjEuNTU1LDE4LjgzMTg5MTggQzIxLjgzMywxOC42NDU4OTE4IDIyLDE4LjMzMzg5MTggMjIsMTcuOTk5ODkxOCBMMjIsMTAuOTk5ODkxOCBMMjAsMTAuOTk5ODkxOCBMMjAsMTcuNDY0ODkxOCBMMTQuOTU5LDIwLjgyNDg5MTggTDksMTcuNDE5ODkxOCBMOSw4LjU3Mzg5MTgxIEwxNCw1LjY1Nzg5MTgxIEwxNCwxMy45OTk4OTE4IEwxNiwxMy45OTk4OTE4IEwxNiw0LjQ5MDg5MTgxIEwyMC4xMTMsMi4wOTE4OTE4MSBMMjgsNC43MjA4OTE4MSBMMjgsMzMuNDMzODkxOCBMMTMuNDg1LDQyLjE0Mjg5MTggTDE0LjUxNSw0My44NTY4OTE4IEwyOCwzNS43NjU4OTE4IEwyOCw1MS4yNzg4OTE4IEwyMC4xMTMsNTMuOTA3ODkxOCBaIE01MCwzNy45OTk4OTE4IEM1MCwzOS4xMDI4OTE4IDQ5LjEwMywzOS45OTk4OTE4IDQ4LDM5Ljk5OTg5MTggQzQ2Ljg5NywzOS45OTk4OTE4IDQ2LDM5LjEwMjg5MTggNDYsMzcuOTk5ODkxOCBDNDYsMzYuODk2ODkxOCA0Ni44OTcsMzUuOTk5ODkxOCA0OCwzNS45OTk4OTE4IEM0OS4xMDMsMzUuOTk5ODkxOCA1MCwzNi44OTY4OTE4IDUwLDM3Ljk5OTg5MTggTDUwLDM3Ljk5OTg5MTggWiBNNDAsNDcuOTk5ODkxOCBDNDAsNDkuMTAyODkxOCAzOS4xMDMsNDkuOTk5ODkxOCAzOCw0OS45OTk4OTE4IEMzNi44OTcsNDkuOTk5ODkxOCAzNiw0OS4xMDI4OTE4IDM2LDQ3Ljk5OTg5MTggQzM2LDQ2Ljg5Njg5MTggMzYuODk3LDQ1Ljk5OTg5MTggMzgsNDUuOTk5ODkxOCBDMzkuMTAzLDQ1Ljk5OTg5MTggNDAsNDYuODk2ODkxOCA0MCw0Ny45OTk4OTE4IEw0MCw0Ny45OTk4OTE4IFogTTM5LDcuOTk5ODkxODEgQzM5LDYuODk2ODkxODEgMzkuODk3LDUuOTk5ODkxODEgNDEsNS45OTk4OTE4MSBDNDIuMTAzLDUuOTk5ODkxODEgNDMsNi44OTY4OTE4MSA0Myw3Ljk5OTg5MTgxIEM0Myw5LjEwMjg5MTgxIDQyLjEwMyw5Ljk5OTg5MTgxIDQxLDkuOTk5ODkxODEgQzM5Ljg5Nyw5Ljk5OTg5MTgxIDM5LDkuMTAyODkxODEgMzksNy45OTk4OTE4MSBMMzksNy45OTk4OTE4MSBaIE01MiwyMC45OTk4OTE4IEM1MC4xNDEsMjAuOTk5ODkxOCA0OC41ODksMjIuMjc5ODkxOCA0OC4xNDIsMjMuOTk5ODkxOCBMMzAsMjMuOTk5ODkxOCBMMzAsMTguOTk5ODkxOCBMNDEsMTguOTk5ODkxOCBDNDEuNTUzLDE4Ljk5OTg5MTggNDIsMTguNTUxODkxOCA0MiwxNy45OTk4OTE4IEw0MiwxMS44NTc4OTE4IEM0My43MiwxMS40MTA4OTE4IDQ1LDkuODU3ODkxODEgNDUsNy45OTk4OTE4MSBDNDUsNS43OTM4OTE4MSA0My4yMDYsMy45OTk4OTE4MSA0MSwzLjk5OTg5MTgxIEMzOC43OTQsMy45OTk4OTE4MSAzNyw1Ljc5Mzg5MTgxIDM3LDcuOTk5ODkxODEgQzM3LDkuODU3ODkxODEgMzguMjgsMTEuNDEwODkxOCA0MCwxMS44NTc4OTE4IEw0MCwxNi45OTk4OTE4IEwzMCwxNi45OTk4OTE4IEwzMCwzLjk5OTg5MTgxIEMzMCwzLjU2ODg5MTgxIDI5LjcyNSwzLjE4Nzg5MTgxIDI5LjMxNiwzLjA1MDg5MTgxIEwyMC4zMTYsMC4wNTA4OTE4MTEgQzIwLjA0MiwtMC4wMzkxMDgxODkgMTkuNzQ0LC0wLjAwOTEwODE4OTA0IDE5LjQ5NiwwLjEzNTg5MTgxMSBMNy40OTYsNy4xMzU4OTE4MSBDNy4xODgsNy4zMTQ4OTE4MSA3LDcuNjQ0ODkxODEgNyw3Ljk5OTg5MTgxIEw3LDE3LjQxOTg5MTggTDAuNTA0LDIxLjEzMTg5MTggQzAuMTkyLDIxLjMwOTg5MTggMCwyMS42NDA4OTE4IDAsMjEuOTk5ODkxOCBMMCwzMy45OTk4OTE4IEMwLDM0LjM1ODg5MTggMC4xOTIsMzQuNjg5ODkxOCAwLjUwNCwzNC44Njc4OTE4IEw3LDM4LjU3OTg5MTggTDcsNDcuOTk5ODkxOCBDNyw0OC4zNTQ4OTE4IDcuMTg4LDQ4LjY4NDg5MTggNy40OTYsNDguODYzODkxOCBMMTkuNDk2LDU1Ljg2Mzg5MTggQzE5LjY1LDU1Ljk1Mzg5MTggMTkuODI1LDU1Ljk5OTg5MTggMjAsNTUuOTk5ODkxOCBDMjAuMTA2LDU1Ljk5OTg5MTggMjAuMjEzLDU1Ljk4Mjg5MTggMjAuMzE2LDU1Ljk0ODg5MTggTDI5LjMxNiw1Mi45NDg4OTE4IEMyOS43MjUsNTIuODExODkxOCAzMCw1Mi40MzA4OTE4IDMwLDUxLjk5OTg5MTggTDMwLDM5Ljk5OTg5MTggTDM3LDM5Ljk5OTg5MTggTDM3LDQ0LjE0MTg5MTggQzM1LjI4LDQ0LjU4ODg5MTggMzQsNDYuMTQxODkxOCAzNCw0Ny45OTk4OTE4IEMzNCw1MC4yMDU4OTE4IDM1Ljc5NCw1MS45OTk4OTE4IDM4LDUxLjk5OTg5MTggQzQwLjIwNiw1MS45OTk4OTE4IDQyLDUwLjIwNTg5MTggNDIsNDcuOTk5ODkxOCBDNDIsNDYuMTQxODkxOCA0MC43Miw0NC41ODg4OTE4IDM5LDQ0LjE0MTg5MTggTDM5LDM4Ljk5OTg5MTggQzM5LDM4LjQ0Nzg5MTggMzguNTUzLDM3Ljk5OTg5MTggMzgsMzcuOTk5ODkxOCBMMzAsMzcuOTk5ODkxOCBMMzAsMzIuOTk5ODkxOCBMNDIuNSwzMi45OTk4OTE4IEw0NC42MzgsMzUuODQ5ODkxOCBDNDQuMjM5LDM2LjQ3MTg5MTggNDQsMzcuMjA2ODkxOCA0NCwzNy45OTk4OTE4IEM0NCw0MC4yMDU4OTE4IDQ1Ljc5NCw0MS45OTk4OTE4IDQ4LDQxLjk5OTg5MTggQzUwLjIwNiw0MS45OTk4OTE4IDUyLDQwLjIwNTg5MTggNTIsMzcuOTk5ODkxOCBDNTIsMzUuNzkzODkxOCA1MC4yMDYsMzMuOTk5ODkxOCA0OCwzMy45OTk4OTE4IEM0Ny4zMTYsMzMuOTk5ODkxOCA0Ni42ODIsMzQuMTg3ODkxOCA0Ni4xMTksMzQuNDkxODkxOCBMNDMuOCwzMS4zOTk4OTE4IEM0My42MTEsMzEuMTQ3ODkxOCA0My4zMTQsMzAuOTk5ODkxOCA0MywzMC45OTk4OTE4IEwzMCwzMC45OTk4OTE4IEwzMCwyNS45OTk4OTE4IEw0OC4xNDIsMjUuOTk5ODkxOCBDNDguNTg5LDI3LjcxOTg5MTggNTAuMTQxLDI4Ljk5OTg5MTggNTIsMjguOTk5ODkxOCBDNTQuMjA2LDI4Ljk5OTg5MTggNTYsMjcuMjA1ODkxOCA1NiwyNC45OTk4OTE4IEM1NiwyMi43OTM4OTE4IDU0LjIwNiwyMC45OTk4OTE4IDUyLDIwLjk5OTg5MTggTDUyLDIwLjk5OTg5MTggWiIgaWQ9IkZpbGwtMSI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:aws-bedrock:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="credentials" target="authentication.type" />
          <zeebe:input source="=&#34;{{secrets.AI_AWS_BEDROCK_ACCESS_KEY}}&#34;" target="authentication.accessKey" />
          <zeebe:input source="=&#34;{{secrets.AI_AWS_BEDROCK_SECRET_KEY}}&#34;" target="authentication.secretKey" />
          <zeebe:input source="us-east-1" target="configuration.region" />
          <zeebe:input source="invokeModel" target="action" />
          <zeebe:input source="anthropic.claude-3-5-sonnet-20240620-v1:0" target="data.modelId" />
          <zeebe:input source="={&#10;    &#34;anthropic_version&#34;: &#34;bedrock-2023-05-31&#34;,&#10;    &#34;max_tokens&#34;: 8192,&#10;    &#34;system&#34;: &#34;You are an expert in mapping and storing outputs from multiple APIs in a generic format. If no data is presented, do nothing. Otherwise, chose the most fitting function call and call it with the data the user presented. Do not engage in a conversation. Add any relevant details to have a comprehensive itinerary in the additionalDetails field&#34;,&#10;    &#34;messages&#34;: [&#10;        {&#10;            &#34;role&#34;: &#34;user&#34;,&#10;            &#34;content&#34;: &#34;# Additional Information\n\n&#34; + string(API_to_probe_options) + &#34;\n\n# API output\n\nMap and call a function with:\n\n&#34; + string(api_output_collection)&#10;        }&#10;    ],&#10;    &#34;tools&#34;: [&#10;        {&#10;            &#34;name&#34;: &#34;store-accommodation-listing&#34;,&#10;            &#34;description&#34;: &#34;Stores a standardized list of accommodation options such as hotels or apartments.&#34;,&#10;            &#34;input_schema&#34;: {&#10;                &#34;type&#34;: &#34;object&#34;,&#10;                &#34;properties&#34;: {&#10;                    &#34;offers&#34;: {&#10;                        &#34;type&#34;: &#34;array&#34;,&#10;                        &#34;items&#34;: {&#10;                            &#34;type&#34;: &#34;object&#34;,&#10;                            &#34;properties&#34;: {&#10;                                &#34;location&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;Location or destination of the accommodation.&#34;&#10;                                },&#10;                                &#34;check_in&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;Check-in or arrival date in the format YYYY-MM-DD.&#34;&#10;                                },&#10;                                &#34;check_out&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;Check-out or departure date in the format YYYY-MM-DD.&#34;&#10;                                },&#10;                                &#34;guests&#34;: {&#10;                                    &#34;type&#34;: &#34;integer&#34;,&#10;                                    &#34;description&#34;: &#34;Number of guests.&#34;&#10;                                },&#10;                                &#34;additionalDetails&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;The relevant context for accomodations not covered in the other elements.&#34;&#10;                                }&#10;                            },&#10;                            &#34;required&#34;: [&#34;location&#34;, &#34;check_in&#34;, &#34;check_out&#34;, &#34;guests&#34;]&#10;                        }&#10;                    },&#10;                    &#34;endpoint&#34;: {&#10;                        &#34;type&#34;: &#34;string&#34;,&#10;                        &#34;enum&#34;: [&#10;                            &#34;/wanderlust-hotels/list&#34;,&#10;                            &#34;/acepnp-apartments/options&#34;&#10;                        ]&#10;                    }&#10;                },&#10;                &#34;required&#34;: [&#34;offers&#34;, &#34;endpoint&#34;]&#10;            }&#10;        },&#10;        {&#10;            &#34;name&#34;: &#34;store-car-rental-listing&#34;,&#10;            &#34;description&#34;: &#34;Stores a standardized list of car rental options.&#34;,&#10;            &#34;input_schema&#34;: {&#10;                &#34;type&#34;: &#34;object&#34;,&#10;                &#34;properties&#34;: {&#10;                    &#34;offers&#34;: {&#10;                        &#34;type&#34;: &#34;array&#34;,&#10;                        &#34;items&#34;: {&#10;                            &#34;type&#34;: &#34;object&#34;,&#10;                            &#34;properties&#34;: {&#10;                                &#34;pickup_location&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;Location to pick up the car.&#34;&#10;                                },&#10;                                &#34;pickup_date&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;Date of picking up the car in the format YYYY-MM-DD.&#34;&#10;                                },&#10;                                &#34;return_date&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;Date of returning the car in the format YYYY-MM-DD.&#34;&#10;                                },&#10;                                &#34;additionalDetails&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;The relevant context for cars not covered in the other elements.&#34;&#10;                                }&#10;                            },&#10;                            &#34;required&#34;: [&#34;pickup_location&#34;, &#34;pickup_date&#34;, &#34;return_date&#34;]&#10;                        }&#10;                    },&#10;                    &#34;endpoint&#34;: {&#10;                        &#34;type&#34;: &#34;string&#34;,&#10;                        &#34;enum&#34;: [&#10;                            &#34;/bevis-cars/vehicles&#34;,&#10;                            &#34;/super-lux-rentals/available-cars&#34;&#10;                        ]&#10;                    }&#10;                },&#10;                &#34;required&#34;: [&#34;offers&#34;, &#34;endpoint&#34;]&#10;            }&#10;        },&#10;        {&#10;            &#34;name&#34;: &#34;store-flight-listing&#34;,&#10;            &#34;description&#34;: &#34;Stores a standardized list of flight options.&#34;,&#10;            &#34;input_schema&#34;: {&#10;                &#34;type&#34;: &#34;object&#34;,&#10;                &#34;properties&#34;: {&#10;                    &#34;offers&#34;: {&#10;                        &#34;type&#34;: &#34;array&#34;,&#10;                        &#34;items&#34;: {&#10;                            &#34;type&#34;: &#34;object&#34;,&#10;                            &#34;properties&#34;: {&#10;                                &#34;origin&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;Origin airport in the format YYY.&#34;&#10;                                },&#10;                                &#34;destination&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;Destination airport in the format YYY.&#34;&#10;                                },&#10;                                &#34;departure_date&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;Date of the flight in the format YYYY-MM-DD.&#34;&#10;                                },&#10;                                &#34;additionalDetails&#34;: {&#10;                                    &#34;type&#34;: &#34;string&#34;,&#10;                                    &#34;description&#34;: &#34;The relevant context for flights not covered in the other elements.&#34;&#10;                                }&#10;                            },&#10;                            &#34;required&#34;: [&#34;origin&#34;, &#34;destination&#34;, &#34;departure_date&#34;]&#10;                        }&#10;                    },&#10;                    &#34;endpoint&#34;: {&#10;                        &#34;type&#34;: &#34;string&#34;,&#10;                        &#34;enum&#34;: [&#10;                            &#34;/fabtastic-flights/search-flights&#34;,&#10;                            &#34;/cheaperthanchips-air/find-deals&#34;&#10;                        ]&#10;                    }&#10;                },&#10;                &#34;required&#34;: [&#34;offers&#34;, &#34;endpoint&#34;]&#10;            }&#10;        }&#10;		],&#10;    &#34;tool_choice&#34;: {&#34;type&#34;: &#34;any&#34;}&#10;}" target="data.payload" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={&#34;summarizedPlan&#34;: string(response.body.content)}" />
          <zeebe:header key="retryBackoff" value="PT0S" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_12g0ycy</bpmn:incoming>
      <bpmn:outgoing>Flow_1ieqrbx</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="ApiRoutingAgent" name="API Routing Agent" zeebe:modelerTemplate="io.camunda.connectors.aws.bedrock.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgODAgODAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+SWNvbi1BcmNoaXRlY3R1cmUvNjQvQXJjaF9BbWF6b24tQmVkcm9ja182NDwvdGl0bGU+CiAgICA8ZyBpZD0iSWNvbi1BcmNoaXRlY3R1cmUvNjQvQXJjaF9BbWF6b24tQmVkcm9ja182NCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Ikljb24tQXJjaGl0ZWN0dXJlLUJHLzY0L01hY2hpbmUtTGVhcm5pbmciIGZpbGw9IiM5OTY5ZjciPgogICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiB4PSIwIiB5PSIwIiB3aWR0aD0iODAiIGhlaWdodD0iODAiPjwvcmVjdD4KICAgICAgICA8L2c+CiAgICAgICAgPGcgaWQ9Ikljb24tU2VydmljZS82NC9BbWF6b24tQmVkcm9ja182NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIuMDAwMDAwLCAxMi4wMDAwMDApIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHBhdGggZD0iTTUyLDI2Ljk5OTg5MTggQzUwLjg5NywyNi45OTk4OTE4IDUwLDI2LjEwMjg5MTggNTAsMjQuOTk5ODkxOCBDNTAsMjMuODk2ODkxOCA1MC44OTcsMjIuOTk5ODkxOCA1MiwyMi45OTk4OTE4IEM1My4xMDMsMjIuOTk5ODkxOCA1NCwyMy44OTY4OTE4IDU0LDI0Ljk5OTg5MTggQzU0LDI2LjEwMjg5MTggNTMuMTAzLDI2Ljk5OTg5MTggNTIsMjYuOTk5ODkxOCBMNTIsMjYuOTk5ODkxOCBaIE0yMC4xMTMsNTMuOTA3ODkxOCBMMTYuODY1LDUyLjAxMzg5MTggTDIzLjUzLDQ3Ljg0Nzg5MTggTDIyLjQ3LDQ2LjE1MTg5MTggTDE0LjkxMyw1MC44NzQ4OTE4IEw5LDQ3LjQyNTg5MTggTDksMzguNTM0ODkxOCBMMTQuNTU1LDM0LjgzMTg5MTggTDEzLjQ0NSwzMy4xNjc4OTE4IEw3Ljk1OSwzNi44MjQ4OTE4IEwyLDMzLjQxOTg5MTggTDIsMjguNTc5ODkxOCBMOC40OTYsMjQuODY3ODkxOCBMNy41MDQsMjMuMTMxODkxOCBMMiwyNi4yNzY4OTE4IEwyLDIyLjU3OTg5MTggTDgsMTkuMTUxODkxOCBMMTQsMjIuNTc5ODkxOCBMMTQsMjYuNDMzODkxOCBMOS40ODUsMjkuMTQyODkxOCBMMTAuNTE1LDMwLjg1Njg5MTggTDE1LDI4LjE2NTg5MTggTDE5LjQ4NSwzMC44NTY4OTE4IEwyMC41MTUsMjkuMTQyODkxOCBMMTYsMjYuNDMzODkxOCBMMTYsMjIuNTM0ODkxOCBMMjEuNTU1LDE4LjgzMTg5MTggQzIxLjgzMywxOC42NDU4OTE4IDIyLDE4LjMzMzg5MTggMjIsMTcuOTk5ODkxOCBMMjIsMTAuOTk5ODkxOCBMMjAsMTAuOTk5ODkxOCBMMjAsMTcuNDY0ODkxOCBMMTQuOTU5LDIwLjgyNDg5MTggTDksMTcuNDE5ODkxOCBMOSw4LjU3Mzg5MTgxIEwxNCw1LjY1Nzg5MTgxIEwxNCwxMy45OTk4OTE4IEwxNiwxMy45OTk4OTE4IEwxNiw0LjQ5MDg5MTgxIEwyMC4xMTMsMi4wOTE4OTE4MSBMMjgsNC43MjA4OTE4MSBMMjgsMzMuNDMzODkxOCBMMTMuNDg1LDQyLjE0Mjg5MTggTDE0LjUxNSw0My44NTY4OTE4IEwyOCwzNS43NjU4OTE4IEwyOCw1MS4yNzg4OTE4IEwyMC4xMTMsNTMuOTA3ODkxOCBaIE01MCwzNy45OTk4OTE4IEM1MCwzOS4xMDI4OTE4IDQ5LjEwMywzOS45OTk4OTE4IDQ4LDM5Ljk5OTg5MTggQzQ2Ljg5NywzOS45OTk4OTE4IDQ2LDM5LjEwMjg5MTggNDYsMzcuOTk5ODkxOCBDNDYsMzYuODk2ODkxOCA0Ni44OTcsMzUuOTk5ODkxOCA0OCwzNS45OTk4OTE4IEM0OS4xMDMsMzUuOTk5ODkxOCA1MCwzNi44OTY4OTE4IDUwLDM3Ljk5OTg5MTggTDUwLDM3Ljk5OTg5MTggWiBNNDAsNDcuOTk5ODkxOCBDNDAsNDkuMTAyODkxOCAzOS4xMDMsNDkuOTk5ODkxOCAzOCw0OS45OTk4OTE4IEMzNi44OTcsNDkuOTk5ODkxOCAzNiw0OS4xMDI4OTE4IDM2LDQ3Ljk5OTg5MTggQzM2LDQ2Ljg5Njg5MTggMzYuODk3LDQ1Ljk5OTg5MTggMzgsNDUuOTk5ODkxOCBDMzkuMTAzLDQ1Ljk5OTg5MTggNDAsNDYuODk2ODkxOCA0MCw0Ny45OTk4OTE4IEw0MCw0Ny45OTk4OTE4IFogTTM5LDcuOTk5ODkxODEgQzM5LDYuODk2ODkxODEgMzkuODk3LDUuOTk5ODkxODEgNDEsNS45OTk4OTE4MSBDNDIuMTAzLDUuOTk5ODkxODEgNDMsNi44OTY4OTE4MSA0Myw3Ljk5OTg5MTgxIEM0Myw5LjEwMjg5MTgxIDQyLjEwMyw5Ljk5OTg5MTgxIDQxLDkuOTk5ODkxODEgQzM5Ljg5Nyw5Ljk5OTg5MTgxIDM5LDkuMTAyODkxODEgMzksNy45OTk4OTE4MSBMMzksNy45OTk4OTE4MSBaIE01MiwyMC45OTk4OTE4IEM1MC4xNDEsMjAuOTk5ODkxOCA0OC41ODksMjIuMjc5ODkxOCA0OC4xNDIsMjMuOTk5ODkxOCBMMzAsMjMuOTk5ODkxOCBMMzAsMTguOTk5ODkxOCBMNDEsMTguOTk5ODkxOCBDNDEuNTUzLDE4Ljk5OTg5MTggNDIsMTguNTUxODkxOCA0MiwxNy45OTk4OTE4IEw0MiwxMS44NTc4OTE4IEM0My43MiwxMS40MTA4OTE4IDQ1LDkuODU3ODkxODEgNDUsNy45OTk4OTE4MSBDNDUsNS43OTM4OTE4MSA0My4yMDYsMy45OTk4OTE4MSA0MSwzLjk5OTg5MTgxIEMzOC43OTQsMy45OTk4OTE4MSAzNyw1Ljc5Mzg5MTgxIDM3LDcuOTk5ODkxODEgQzM3LDkuODU3ODkxODEgMzguMjgsMTEuNDEwODkxOCA0MCwxMS44NTc4OTE4IEw0MCwxNi45OTk4OTE4IEwzMCwxNi45OTk4OTE4IEwzMCwzLjk5OTg5MTgxIEMzMCwzLjU2ODg5MTgxIDI5LjcyNSwzLjE4Nzg5MTgxIDI5LjMxNiwzLjA1MDg5MTgxIEwyMC4zMTYsMC4wNTA4OTE4MTEgQzIwLjA0MiwtMC4wMzkxMDgxODkgMTkuNzQ0LC0wLjAwOTEwODE4OTA0IDE5LjQ5NiwwLjEzNTg5MTgxMSBMNy40OTYsNy4xMzU4OTE4MSBDNy4xODgsNy4zMTQ4OTE4MSA3LDcuNjQ0ODkxODEgNyw3Ljk5OTg5MTgxIEw3LDE3LjQxOTg5MTggTDAuNTA0LDIxLjEzMTg5MTggQzAuMTkyLDIxLjMwOTg5MTggMCwyMS42NDA4OTE4IDAsMjEuOTk5ODkxOCBMMCwzMy45OTk4OTE4IEMwLDM0LjM1ODg5MTggMC4xOTIsMzQuNjg5ODkxOCAwLjUwNCwzNC44Njc4OTE4IEw3LDM4LjU3OTg5MTggTDcsNDcuOTk5ODkxOCBDNyw0OC4zNTQ4OTE4IDcuMTg4LDQ4LjY4NDg5MTggNy40OTYsNDguODYzODkxOCBMMTkuNDk2LDU1Ljg2Mzg5MTggQzE5LjY1LDU1Ljk1Mzg5MTggMTkuODI1LDU1Ljk5OTg5MTggMjAsNTUuOTk5ODkxOCBDMjAuMTA2LDU1Ljk5OTg5MTggMjAuMjEzLDU1Ljk4Mjg5MTggMjAuMzE2LDU1Ljk0ODg5MTggTDI5LjMxNiw1Mi45NDg4OTE4IEMyOS43MjUsNTIuODExODkxOCAzMCw1Mi40MzA4OTE4IDMwLDUxLjk5OTg5MTggTDMwLDM5Ljk5OTg5MTggTDM3LDM5Ljk5OTg5MTggTDM3LDQ0LjE0MTg5MTggQzM1LjI4LDQ0LjU4ODg5MTggMzQsNDYuMTQxODkxOCAzNCw0Ny45OTk4OTE4IEMzNCw1MC4yMDU4OTE4IDM1Ljc5NCw1MS45OTk4OTE4IDM4LDUxLjk5OTg5MTggQzQwLjIwNiw1MS45OTk4OTE4IDQyLDUwLjIwNTg5MTggNDIsNDcuOTk5ODkxOCBDNDIsNDYuMTQxODkxOCA0MC43Miw0NC41ODg4OTE4IDM5LDQ0LjE0MTg5MTggTDM5LDM4Ljk5OTg5MTggQzM5LDM4LjQ0Nzg5MTggMzguNTUzLDM3Ljk5OTg5MTggMzgsMzcuOTk5ODkxOCBMMzAsMzcuOTk5ODkxOCBMMzAsMzIuOTk5ODkxOCBMNDIuNSwzMi45OTk4OTE4IEw0NC42MzgsMzUuODQ5ODkxOCBDNDQuMjM5LDM2LjQ3MTg5MTggNDQsMzcuMjA2ODkxOCA0NCwzNy45OTk4OTE4IEM0NCw0MC4yMDU4OTE4IDQ1Ljc5NCw0MS45OTk4OTE4IDQ4LDQxLjk5OTg5MTggQzUwLjIwNiw0MS45OTk4OTE4IDUyLDQwLjIwNTg5MTggNTIsMzcuOTk5ODkxOCBDNTIsMzUuNzkzODkxOCA1MC4yMDYsMzMuOTk5ODkxOCA0OCwzMy45OTk4OTE4IEM0Ny4zMTYsMzMuOTk5ODkxOCA0Ni42ODIsMzQuMTg3ODkxOCA0Ni4xMTksMzQuNDkxODkxOCBMNDMuOCwzMS4zOTk4OTE4IEM0My42MTEsMzEuMTQ3ODkxOCA0My4zMTQsMzAuOTk5ODkxOCA0MywzMC45OTk4OTE4IEwzMCwzMC45OTk4OTE4IEwzMCwyNS45OTk4OTE4IEw0OC4xNDIsMjUuOTk5ODkxOCBDNDguNTg5LDI3LjcxOTg5MTggNTAuMTQxLDI4Ljk5OTg5MTggNTIsMjguOTk5ODkxOCBDNTQuMjA2LDI4Ljk5OTg5MTggNTYsMjcuMjA1ODkxOCA1NiwyNC45OTk4OTE4IEM1NiwyMi43OTM4OTE4IDU0LjIwNiwyMC45OTk4OTE4IDUyLDIwLjk5OTg5MTggTDUyLDIwLjk5OTg5MTggWiIgaWQ9IkZpbGwtMSI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:aws-bedrock:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="credentials" target="authentication.type" />
          <zeebe:input source="=&#34;{{secrets.AI_AWS_BEDROCK_ACCESS_KEY}}&#34;" target="authentication.accessKey" />
          <zeebe:input source="=&#34;{{secrets.AI_AWS_BEDROCK_SECRET_KEY}}&#34;" target="authentication.secretKey" />
          <zeebe:input source="us-east-1" target="configuration.region" />
          <zeebe:input source="invokeModel" target="action" />
          <zeebe:input source="anthropic.claude-3-5-sonnet-20240620-v1:0" target="data.modelId" />
          <zeebe:input source="={&#10;    &#34;anthropic_version&#34;: &#34;bedrock-2023-05-31&#34;,&#10;    &#34;max_tokens&#34;: 8192,&#10;    &#34;system&#34;: &#34;You translate generic data into well formatted, valid REST API requests.\n# Example Output\n\nImportant, to be valid the answer must have \&#34;name\&#34;, \&#34;endpoint\&#34;, \&#34;payload\&#34; see below\n\n[ { \&#34;name\&#34;: \&#34;alpha-books-schema\&#34;, \&#34;endpoint\&#34;: \&#34;/alpha-books/search\&#34;, \&#34;payload\&#34;: { \&#34;list\&#34;: { \&#34;genre\&#34;: \&#34;fiction\&#34;, \&#34;author\&#34;: \&#34;Jane Doe\&#34;, \&#34;publication_date\&#34;: \&#34;2024-05-20\&#34; } } }, { \&#34;name\&#34;: \&#34;beta-music-schema\&#34;, \&#34;endpoint\&#34;: \&#34;/beta-music/discover\&#34;, \&#34;payload\&#34;: { \&#34;list\&#34;: { \&#34;artist\&#34;: \&#34;The Example Band\&#34;, \&#34;release_year\&#34;: \&#34;2023\&#34;, \&#34;genre\&#34;: \&#34;rock\&#34; } } } ]\n\nYou are a service that chooses all the relevant api to probe for the relevant task handed to you along with providing every schema related to theses api, the output must have a payload and valid endpoint from the enum (only one of each per item), here is the task. You are a listing agent, only list related services from the content linked!&#34;,&#10;    &#34;messages&#34;: [&#10;        {&#10;            &#34;role&#34;: &#34;user&#34;,&#10;            &#34;content&#34;: &#34;# Data\n\n&#34; + string(relevant_agent)&#10;        }&#10;    ],&#10;    &#34;tools&#34;: [&#10;        {&#10;            &#34;name&#34;: &#34;available-schemas&#34;,&#10;            &#34;description&#34;: &#34;Chose from the APIs for travel services of three types: flights, car rentals, and accommodations. You can expect to see generic data that relates to listing options from only one type of service provider. Create all listing API calls for the specific service provider type.&#34;,&#10;            &#34;input_schema&#34;: {&#10;                &#34;type&#34;: &#34;object&#34;,&#10;                &#34;schema_list&#34;: {&#10;                    &#34;type&#34;: &#34;list&#34;,&#10;                    &#34;properties&#34;: {&#10;                        &#34;schema&#34;: {&#10;                            &#34;type&#34;: &#34;list&#34;,&#10;                            &#34;enum&#34;: [&#10;                                {&#10;                                    &#34;name&#34;: &#34;acepnp-apartments-schema&#34;,&#10;                                    &#34;description&#34;: &#34;Accommodation service provider for apartments.&#34;,&#10;                                    &#34;payload&#34;: {&#10;                                        &#34;type&#34;: &#34;object&#34;,&#10;                                        &#34;enum&#34;: [&#10;                                            {&#10;                                                &#34;list&#34;: {&#10;                                                    &#34;location&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;The location of the desired appartment.&#34;&#10;                                                    },&#10;                                                    &#34;arrival_date&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Arrival date in the format YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;departure_date&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Departure date in the format YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;guests&#34;: {&#10;                                                        &#34;type&#34;: &#34;integer&#34;,&#10;                                                        &#34;description&#34;: &#34;Number of guests.&#34;&#10;                                                    },&#10;                                                    &#34;bedrooms&#34;: {&#10;                                                        &#34;type&#34;: &#34;integer&#34;,&#10;                                                        &#34;description&#34;: &#34;Number of minimum bedrooms.&#34;&#10;                                                    }&#10;                                                }&#10;                                            }&#10;                                        ]&#10;                                    },&#10;                                    &#34;endpoint&#34;: {&#10;                                        &#34;type&#34;: &#34;string&#34;,&#10;                                        &#34;description&#34;: &#34;Pick `/acepnp-apartments/options` for listing.&#34;,&#10;                                        &#34;enum&#34;: [&#10;                                            &#34;/acepnp-apartments/options&#34;&#10;                                        ]&#10;                                    },&#10;                                    &#34;required&#34;: [&#10;                                        &#34;payload&#34;,&#10;                                        &#34;endpoint&#34;&#10;                                    ]&#10;                                },&#10;                                {&#10;                                    &#34;name&#34;: &#34;wanderlust-hotels-schema&#34;,&#10;                                    &#34;description&#34;: &#34;Accommodation service provider for hotels.&#34;,&#10;                                    &#34;payload&#34;: {&#10;                                        &#34;type&#34;: &#34;object&#34;,&#10;                                        &#34;enum&#34;: [&#10;                                            {&#10;                                                &#34;list&#34;: {&#10;                                                    &#34;destination&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;The location of the desired hotel.&#34;&#10;                                                    },&#10;                                                    &#34;check_in&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Arrival date in the format YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;check_out&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Departure date in the format YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;total_persons&#34;: {&#10;                                                        &#34;type&#34;: &#34;integer&#34;,&#10;                                                        &#34;description&#34;: &#34;Number of guests.&#34;&#10;                                                    },&#10;                                                    &#34;rooms&#34;: {&#10;                                                        &#34;type&#34;: &#34;integer&#34;,&#10;                                                        &#34;description&#34;: &#34;Number of minimum rooms required.&#34;&#10;                                                    }&#10;                                                }&#10;                                            }&#10;                                        ]&#10;                                    },&#10;                                    &#34;endpoint&#34;: {&#10;                                        &#34;type&#34;: &#34;string&#34;,&#10;                                        &#34;description&#34;: &#34;Pick `/wanderlust-hotels/list` for listing.&#34;,&#10;                                        &#34;enum&#34;: [&#10;                                            &#34;/wanderlust-hotels/list&#34;&#10;                                        ]&#10;                                    },&#10;                                    &#34;required&#34;: [&#10;                                        &#34;payload&#34;,&#10;                                        &#34;endpoint&#34;&#10;                                    ]&#10;                                },&#10;                                {&#10;                                    &#34;name&#34;: &#34;bevis-cars-schema&#34;,&#10;                                    &#34;description&#34;: &#34;Car rental service provider.&#34;,&#10;                                    &#34;payload&#34;: {&#10;                                        &#34;type&#34;: &#34;object&#34;,&#10;                                        &#34;enum&#34;: [&#10;                                            {&#10;                                                &#34;list&#34;: {&#10;                                                    &#34;pickup_location&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;The location for picking up the rental car.&#34;&#10;                                                    },&#10;                                                    &#34;dropoff_location&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;The location fo drop off the car at the end of the rental&#34;&#10;                                                    },&#10;                                                    &#34;pickup_date&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Date of the car pickup in the format YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;dropoff_date&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Car return date in the format YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;acriss_code&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;ACRISS (Association of Car Rental Industry Systems Standards) developed a car rental class code system that helps those interested in renting a car make a more informed decision.&#34;&#10;                                                    }&#10;                                                }&#10;                                            }&#10;                                        ]&#10;                                    },&#10;                                    &#34;endpoint&#34;: {&#10;                                        &#34;type&#34;: &#34;string&#34;,&#10;                                        &#34;description&#34;: &#34;Pick `/bevis-cars/vehicles` for listing.&#34;,&#10;                                        &#34;enum&#34;: [&#10;                                            &#34;/bevis-cars/vehicles&#34;&#10;                                        ]&#10;                                    },&#10;                                    &#34;required&#34;: [&#10;                                        &#34;payload&#34;,&#10;                                        &#34;endpoint&#34;&#10;                                    ]&#10;                                },&#10;                                {&#10;                                    &#34;name&#34;: &#34;super-lux-rentals-schema&#34;,&#10;                                    &#34;description&#34;: &#34;Car rental service provider for luxury cars.&#34;,&#10;                                    &#34;payload&#34;: {&#10;                                        &#34;type&#34;: &#34;object&#34;,&#10;                                        &#34;enum&#34;: [&#10;                                            {&#10;                                                &#34;list&#34;: {&#10;                                                    &#34;start_location&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;The location for picking up the rental car.&#34;&#10;                                                    },&#10;                                                   &#34;end_location&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;The location for dropping off the rental car.&#34;&#10;                                                    },&#10;                                                    &#34;start_date&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Date of the car pickup in the format YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;end_date&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Car return date in the format YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;vehicle_type&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;The type of vehicle desired.&#34;&#10;                                                    }&#10;                                                }&#10;                                            }&#10;                                        ]&#10;                                    },&#10;                                    &#34;endpoint&#34;: {&#10;                                        &#34;type&#34;: &#34;string&#34;,&#10;                                        &#34;description&#34;: &#34;Pick `/super-lux-rentals/available-cars` for listing.&#34;,&#10;                                        &#34;enum&#34;: [&#10;                                            &#34;/super-lux-rentals/available-cars&#34;&#10;                                        ]&#10;                                    },&#10;                                    &#34;required&#34;: [&#10;                                        &#34;payload&#34;,&#10;                                        &#34;endpoint&#34;&#10;                                    ]&#10;                                },&#10;                                {&#10;                                    &#34;name&#34;: &#34;fabtastic-flights-schema&#34;,&#10;                                    &#34;description&#34;: &#34;Flight service provider.&#34;,&#10;                                    &#34;payload&#34;: {&#10;                                        &#34;type&#34;: &#34;object&#34;,&#10;                                        &#34;enum&#34;: [&#10;                                            {&#10;                                                &#34;list&#34;: {&#10;                                                    &#34;origin&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Origin airport usually three letters ex: YYY.&#34;&#10;                                                    },&#10;                                                    &#34;destination&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Destination airport usually three letters ex: YYY.&#34;&#10;                                                    },&#10;                                                    &#34;departure_date&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Date which the flight occurs YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;return_date&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Date which the flight occurs YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;number_of_passengers&#34;: {&#10;                                                        &#34;type&#34;: &#34;integer&#34;,&#10;                                                        &#34;description&#34;: &#34;Number of passengers in the flightr.&#34;&#10;                                                    }&#10;                                                }&#10;                                            }&#10;                                        ]&#10;                                    },&#10;                                    &#34;endpoint&#34;: {&#10;                                        &#34;type&#34;: &#34;string&#34;,&#10;                                        &#34;description&#34;: &#34;Pick `/fabtastic-flights/search-flights` for listing.&#34;,&#10;                                        &#34;enum&#34;: [&#10;                                            &#34;/fabtastic-flights/search-flights&#34;&#10;                                        ]&#10;                                    },&#10;                                    &#34;required&#34;: [&#10;                                        &#34;payload&#34;,&#10;                                        &#34;endpoint&#34;&#10;                                    ]&#10;                                },&#10;                                {&#10;                                    &#34;name&#34;: &#34;cheaperthanchips-air-schema&#34;,&#10;                                    &#34;description&#34;: &#34;Flight service provider.&#34;,&#10;                                    &#34;payload&#34;: {&#10;                                        &#34;type&#34;: &#34;object&#34;,&#10;                                        &#34;enum&#34;: [&#10;                                            {&#10;                                                &#34;list&#34;: {&#10;                                                    &#34;from_airport&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Origin airport usually three letters ex: YYY.&#34;&#10;                                                    },&#10;                                                    &#34;to_airport&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Destination airport usually three letters ex: YYY.&#34;&#10;                                                    },&#10;                                                    &#34;date_of_flight&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Date which the flight occurs YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;date_of_return&#34;: {&#10;                                                        &#34;type&#34;: &#34;string&#34;,&#10;                                                        &#34;description&#34;: &#34;Date which the flight occurs YYYY-MM-DD.&#34;&#10;                                                    },&#10;                                                    &#34;passengers&#34;: {&#10;                                                        &#34;type&#34;: &#34;date&#34;,&#10;                                                        &#34;description&#34;: &#34;Number of passengers in the flight.&#34;&#10;                                                    }&#10;                                                }&#10;                                            }&#10;                                        ]&#10;                                    },&#10;                                    &#34;endpoint&#34;: {&#10;                                        &#34;type&#34;: &#34;string&#34;,&#10;                                        &#34;description&#34;: &#34;Pick `/cheaperthanchips-air/find-deals` for listing.&#34;,&#10;                                        &#34;enum&#34;: [&#10;											&#34;/cheaperthanchips-air/find-deals&#34;&#10;										]&#10;                                    },&#10;                                    &#34;required&#34;: [&#10;                                        &#34;payload&#34;,&#10;                                        &#34;endpoint&#34;&#10;                                    ]&#10;                                }&#10;                            ]&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    ],&#10;    &#34;tool_choice&#34;: {&#10;        &#34;type&#34;: &#34;any&#34;&#10;    }&#10;}" target="data.payload" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultVariable" value="agent_options" />
          <zeebe:header key="resultExpression" value="={&#10;  &#34;debug_response_body_content&#34;: response.body,&#10;  &#34;API_to_probe_options&#34;: if response.body.content[1].input.schema_list != null then response.body.content[1].input.schema_list else []&#10;}" />
          <zeebe:header key="retryBackoff" value="PT0S" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1cxalz5</bpmn:incoming>
      <bpmn:incoming>Flow_1w8avuz</bpmn:incoming>
      <bpmn:outgoing>Flow_0dah665</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="EndSearchAgent">
      <bpmn:incoming>Flow_1ieqrbx</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_12g0ycy" sourceRef="ApiCalls" targetRef="ApiAggregatorAgent" />
    <bpmn:sequenceFlow id="Flow_1cxalz5" sourceRef="StartSearchAgent" targetRef="ApiRoutingAgent" />
    <bpmn:sequenceFlow id="Flow_1ieqrbx" sourceRef="ApiAggregatorAgent" targetRef="EndSearchAgent" />
    <bpmn:startEvent id="StartSearchAgent">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=0" target="apiRoutingRetries" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_1cxalz5</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:exclusiveGateway id="RetryGateway" default="Flow_1w8avuz">
      <bpmn:incoming>Flow_19f2fws</bpmn:incoming>
      <bpmn:outgoing>Flow_0s0riy6</bpmn:outgoing>
      <bpmn:outgoing>Flow_1w8avuz</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0s0riy6" sourceRef="RetryGateway" targetRef="ApiCalls">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">={
  "validList": count(API_to_probe_options) &gt; 0,
  "validAPIs": all(for api in API_to_probe_options return api.name != null and api.endpoint != null and api.payload != null),
  "result": validList and validAPIs
}.result</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:scriptTask id="apiRoutingRetriesInc" name="Retries++">
      <bpmn:extensionElements>
        <zeebe:script expression="=apiRoutingRetries + 1" resultVariable="apiRoutingRetries" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0dah665</bpmn:incoming>
      <bpmn:outgoing>Flow_0jumqrt</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:sequenceFlow id="Flow_1w8avuz" name="Retry" sourceRef="RetryGateway" targetRef="ApiRoutingAgent" />
    <bpmn:exclusiveGateway id="Gateway_08lo7zd" default="Flow_0z18kse">
      <bpmn:incoming>Flow_0jumqrt</bpmn:incoming>
      <bpmn:outgoing>Flow_19f2fws</bpmn:outgoing>
      <bpmn:outgoing>Flow_0z18kse</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0dah665" sourceRef="ApiRoutingAgent" targetRef="apiRoutingRetriesInc" />
    <bpmn:sequenceFlow id="Flow_19f2fws" sourceRef="Gateway_08lo7zd" targetRef="RetryGateway">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=apiRoutingRetries &lt; 3</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="ErrorSearchAgentRetriesExceeded" name="Error Search Agent Retries Exceeded">
      <bpmn:incoming>Flow_0z18kse</bpmn:incoming>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0mpjji2" errorRef="Error_0nt4k9c" />
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0z18kse" sourceRef="Gateway_08lo7zd" targetRef="ErrorSearchAgentRetriesExceeded" />
    <bpmn:sequenceFlow id="Flow_0jumqrt" sourceRef="apiRoutingRetriesInc" targetRef="Gateway_08lo7zd" />
    <bpmn:textAnnotation id="TextAnnotation_1aw974x">
      <bpmn:text>create call per search API</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_1e60fb0" associationDirection="None" sourceRef="ApiRoutingAgent" targetRef="TextAnnotation_1aw974x" />
    <bpmn:textAnnotation id="TextAnnotation_0csy64h">
      <bpmn:text>Summarize call and return best results</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_12va37s" associationDirection="None" sourceRef="ApiAggregatorAgent" targetRef="TextAnnotation_0csy64h" />
  </bpmn:process>
  <bpmn:error id="Error_003f3m5" name="Error_1lj3e6b" />
  <bpmn:escalation id="Escalation_3hpm7oq" name="SearchAgentRetriesExceeded" escalationCode="SearchAgentRetriesExceeded" />
  <bpmn:error id="Error_0nt4k9c" name="Error Search Agent Retries Exceeded" errorCode="99" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="SearchAgent">
      <bpmndi:BPMNShape id="Activity_0074ew1_di" bpmnElement="ApiCalls" isExpanded="true">
        <dc:Bounds x="340" y="40" width="350" height="160" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0s3dzi2_di" bpmnElement="CallApi">
        <dc:Bounds x="460" y="76" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0eq8q5c_di" bpmnElement="EndCallApi">
        <dc:Bounds x="622" y="98" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0fdv32x_di" bpmnElement="StartCallApi">
        <dc:Bounds x="370" y="98" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1geyetg_di" bpmnElement="Flow_1geyetg">
        <di:waypoint x="406" y="116" />
        <di:waypoint x="460" y="116" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1j6bi06_di" bpmnElement="Flow_1j6bi06">
        <di:waypoint x="560" y="116" />
        <di:waypoint x="622" y="116" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Activity_14k8z08_di" bpmnElement="ApiAggregatorAgent">
        <dc:Bounds x="790" y="90" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1b7ib8c" bpmnElement="ApiRoutingAgent">
        <dc:Bounds x="-160" y="90" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_05v69av_di" bpmnElement="EndSearchAgent">
        <dc:Bounds x="972" y="112" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartSearchAgent">
        <dc:Bounds x="-238" y="112" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_13d82s7_di" bpmnElement="RetryGateway" isMarkerVisible="true">
        <dc:Bounds x="235" y="105" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0thszac_di" bpmnElement="apiRoutingRetriesInc">
        <dc:Bounds x="-10" y="90" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_08lo7zd_di" bpmnElement="Gateway_08lo7zd" isMarkerVisible="true">
        <dc:Bounds x="135" y="105" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1cew0aa_di" bpmnElement="ErrorSearchAgentRetriesExceeded">
        <dc:Bounds x="142" y="212" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="127" y="255" width="67" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_1aw974x_di" bpmnElement="TextAnnotation_1aw974x">
        <dc:Bounds x="-150" y="240" width="100" height="41" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_0csy64h_di" bpmnElement="TextAnnotation_0csy64h">
        <dc:Bounds x="890" y="0" width="100" height="55" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_12g0ycy_di" bpmnElement="Flow_12g0ycy">
        <di:waypoint x="690" y="130" />
        <di:waypoint x="790" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1cxalz5_di" bpmnElement="Flow_1cxalz5">
        <di:waypoint x="-202" y="130" />
        <di:waypoint x="-160" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ieqrbx_di" bpmnElement="Flow_1ieqrbx">
        <di:waypoint x="890" y="130" />
        <di:waypoint x="972" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0s0riy6_di" bpmnElement="Flow_0s0riy6">
        <di:waypoint x="285" y="130" />
        <di:waypoint x="340" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1w8avuz_di" bpmnElement="Flow_1w8avuz">
        <di:waypoint x="260" y="105" />
        <di:waypoint x="260" y="20" />
        <di:waypoint x="-110" y="20" />
        <di:waypoint x="-110" y="90" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="62" y="2" width="27" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0dah665_di" bpmnElement="Flow_0dah665">
        <di:waypoint x="-60" y="130" />
        <di:waypoint x="-10" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19f2fws_di" bpmnElement="Flow_19f2fws">
        <di:waypoint x="185" y="130" />
        <di:waypoint x="235" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0z18kse_di" bpmnElement="Flow_0z18kse">
        <di:waypoint x="160" y="155" />
        <di:waypoint x="160" y="212" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0jumqrt_di" bpmnElement="Flow_0jumqrt">
        <di:waypoint x="90" y="130" />
        <di:waypoint x="135" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_1e60fb0_di" bpmnElement="Association_1e60fb0">
        <di:waypoint x="-107" y="170" />
        <di:waypoint x="-102" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_12va37s_di" bpmnElement="Association_12va37s">
        <di:waypoint x="875" y="90" />
        <di:waypoint x="905" y="55" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
